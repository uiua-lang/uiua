# Reduce
⍤⤙≍ [1 2 3] /⊂[1 2 3]
⍤⤙≍ [1 2 3 4 5 6] /⊂[1_2 3_4 5_6]
⍤⤙≍ [12 15 18] /+ [1_2_3 4_5_6 7_8_9]
⍤⤙≍ [] /× ↯3_0 0
⍤⤙≍ [1 1 1] /× ↯0_3 0
⍤⤙≍ ⊃/-(⊣\-) [1 2 3 4 5]
⍤⤙≍ ⊃/(-:)(⊣\(-:)) [1 2 3 4 5]
⍤⤙≍ ⊃/-(⊣\-) ÷2[1 2 3 4 5]
⍤⤙≍ ⊃/(-:)(⊣\(-:)) ÷2[1 2 3 4 5]

# Deep reduce
A ← ↯2_3_4⇡24
⍤⤙≍ ⊣A /↥ A
⍤⤙≍ [8_9_10_11 20_21_22_23] ≡/↥ A
⍤⤙≍ [3_7_11 15_19_23] ≡≡/↥ A
⍤⤙≍ ↯6_4 A /⊂ A
⍤⤙≍ ↯2_12 A ≡/⊂ A
⍤⤙≍ A ≡≡/⊂ A
⍤⤙≍ ⊟.∞ ≡/↧ ↯2_0e
⍤⤙≍ ↯2_0e ≡/↧ ↯2_2_0e
⍤⤙≍ ⊟.⊟.∞ ≡≡/↧ ↯2_2_0e
≡/{⊙∘} A
⍤⤙≍ [
  {{[0 1 2 3] [4 5 6 7]} [8 9 10 11]}
  {{[12 13 14 15] [16 17 18 19]} [20 21 22 23]}]
≡≡/{⊙∘} A
⍤⤙≍ [
  [{{{0 1} 2} 3}
   {{{4 5} 6} 7}
   {{{8 9} 10} 11}]
  [{{{12 13} 14} 15}
   {{{16 17} 18} 19}
   {{{20 21} 22} 23}]]

# Reduce fills
⍤⤙≍ ¯∞ /↥ []
⍤⤙≍ 5 ⬚5/↥ []
⍤⤙≍ 5.2 ⬚5.2/↥ []
⍤⤙≍ 1 /↥ [1]
⍤⤙≍ 5 ⬚5/↥ [1]
⍤⤙≍ 5.2 ⬚5.2/↥ [1]
⍤⤙≍ 1.1 /↥ [1.1]
⍤⤙≍ 5 ⬚5/↥ [1.1]
⍤⤙≍ 5.2 ⬚5.2/↥ [1.1]

⍤⤙≍ ∞ /↧ []
⍤⤙≍ 5 ⬚5/↧ []
⍤⤙≍ 5.2 ⬚5.2/↧ []
⍤⤙≍ 1 /↧ [1]
⍤⤙≍ 1 ⬚5/↧ [1]
⍤⤙≍ 1 ⬚5.2/↧ [1]
⍤⤙≍ 1.1 /↧ [1.1]
⍤⤙≍ 1.1 ⬚5/↧ [1.1]
⍤⤙≍ 1.1 ⬚5.2/↧ [1.1]

⍤⤙≍ 0 /+ ↯[0]e
⍤⤙≍ 10 ⬚10/+ ↯[0]e
⍤⤙≍ [0 0] /+ ↯[0 2]e
⍤⤙≍ [10 10] ⬚10/+ ↯[0 2]e

⍤⤙≍ [1_2_3_4 2_3_0_0] ⬚0≡/⍜-⇡ [1_5 2_4]

# Reduce identities
⍤⤙≍ [2 2] /(⊂+1) [1 2]
⍤⤙≍ [1] /(⊂+1) [1]
⍤⤙≍ [] /(⊂+1) []

⍤⤙≍ [2 3] /(+1⊂) [1 2]
⍤⤙≍ [1] /(+1⊂) [1]
⍤⤙≍ [] /(+1⊂) []

⍤⤙≍ "1 2" /$"_ _" [1 2]
⍤⤙≍ "1" /$"_ _" [1]
⍤⤙≍ "" /$"_ _" []

⍤⤙≍ ∞ /◿ []

# Reduce join
⍤⤙≍ [7 5]/(⊂?)[7_5]
⍤⤙≍ [7 5]/(?⊂)[7_5]
⍤⤙≍ [7 5]/(⊂)[7_5]
⍤⤙≍ [5] /(⊂)[5]
⍤⤙≍ [5] /(?⊂)[5]
⍤⤙≍ [5] /(⊂?)[5]

⍤⤙≍ [] /(⊂?)↯0_2e
⍤⤙≍ [] /(?⊂)↯0_2e
⍤⤙≍ [] /(⊂)↯0_2e
⍤⤙≍ [] /(⊂)[]
⍤⤙≍ [] /(?⊂)[]
⍤⤙≍ [] /(⊂?)[]

⍤⤙≍ [2 1 3 1 4] /(⊂⊂) 1 [2 3 4]
⍤⤙≍ "hi there buddy" /◇(⊂⊂) @ {"hi" "there" "buddy"}
⍤⤙≍ "hi, there, buddy" /◇(⊂⊂) ", " {"hi" "there" "buddy"}
⍤⤙≍ [1_7_2 3_7_4 5_7_6] ≡/(⊂⊂) 7 [1_2 3_4 5_6]
⍤⤙≍ [1_7_2 3_8_4 5_9_6] ≡/(⊂⊂) 7_8_9 [1_2 3_4 5_6]
⍤⤙≍ [3 0 1 2 4 0 1 2 5] /(⊂⊂⊂) 0 1_2 [3 4 5]

# Conjoin
⍤⤙≍ [1 2 3] ⬚[]/◇⊂ {1 2 3}
⍤⤙≍ [1 2] ⬚[]/◇⊂ {1 2}
⍤⤙≍ [1] ⬚[]/◇⊂ {1}
⍤⤙≍ [1 2 3] /◇⊂ {1 2 3}
⍤⤙≍ [1 2] /◇⊂ {1 2}
⍤⤙≍ [1] /◇⊂ {1}
⍤⤙≍ "" /◇⊂ {""}
⍤⤙≍ "" /◇⊂ {"" ""}
⍤⤙≍ [] /◇⊂ {}
⍤⤙≍ ↯4_0e /◇⊂ {.↯2_0e}
⍤⤙≍ ↯0_2e /◇⊂ {.↯0_2e}
⍤⤙≍ {{"97"} {}} ≡/◇⊂ {{"97"} {}}
⍤⤙≍ {"97" []} ⍚/◇⊂ {{"97"} {}}

# Inventory
⍤⤙≍ {[0] 0_1 0_1_2 0_1_2_3} ⍚⇡ [1 2 3 4]
⍤⤙≍ {1_7 2_3_8 4_5_6_9} ⍚⊂ {1 2_3 4_5_6} [7 8 9]
⍤⤙≍ {.[[][]]} ⍚⊟ ≡□. ↯2_0 0
⍤⤙≍ □[1 2] ⍚(↙2) □[1 2 3 4]
⍤⤙≍ □⇡4 ⍚⊂ 0 □[1 2 3]
⍤⤙≍ {1_2_5 1_3_6 1_4_7} ⍚(⊂⊂) 1 {2 3 4} [5 6 7]
⍤⤙≍ {1_2_5 1_3_6 1_4_7} ⍚(⊂⊂) 1 {2 3 4} {5 6 7}
⍤⤙≍ {1_2_5_6_7 1_3_5_6_7 1_4_5_6_7} ⍚(⊂⊂) 1 {2 3 4} ¤[5 6 7]
⍤⤙≍ {{1 2 5 6 7} {1 3 5 6 7} {1 4 5 6 7}} ⍚(⊂⊂) 1 {2 3 4} ¤{5 6 7}
⍤⤙≍ {} ⍚⊂ "" □"12"
⍤⤙≍ {} ⍚⊂ □"12" ""
⍤⤙≍ [{0} {1} {2}] [⍚⊙⊙∘] {0} {1} {2}
⍤⤙≍ {[2 3 4] [6 7] [9]} ⍚+ [1 2 3] {[1 2 3] [4 5] [6]}

# Scan
⍤⤙≍ [1 3 6 10] \+[1 2 3 4]
⍤⤙≍ [0_0_0_0 0_1_0_0 0_1_2_0 0_1_2_3] ⬚0\⊂ [1 2 3]
⍤⤙≍ [1 2 3 4 5] °\+[1 3 6 10 15]
⍤⤙≍ [1_2_3 4_5_6 7_8_9] °\+[1_2_3 5_7_9 12_15_18]
⍤⤙≍ ⊃(⊂⊢:≡/=◫2.|°\=) [1 0 1 1 0]
⍤⤙≍ ⊃(⊂⊢:≡/≠◫2.|°\≠) [1 0 1 1 0]
⍤⤙≍ [1 12 123 1234] \(+×) 10 [1 2 3 4]
⍤⤙≍ ["a    " "a,b  " "a,b,c"] ⬚@ \(⊂⊂) @, "abc"

# Fold
⍤⤙≍ 18 ∧+ [2 3 5 7] 1
⍤⤙≍ 16 ∧+ [1 2 3] 10
⍤⤙≍ 10 ∧+ [] 10
⍤⤙≍ [1 2 3] ∧(⊂⊂) 1 2 3
⍤⤙≍ [15 120] [∧(⊃+(×⊙⋅∘)) +1⇡5 0 1]
⍤⤙≍ [2222 0] [∧(⊃(+/+)⋅⋅∘) ♭₂ [1_1]_[10_10]_[100_100]_[1000_1000] 0 0]
⍤⤙≍ 60 ∧(+×) 10 1_2_3 0
⍤⤙≍ [] ∧(+) [1] []

# Each pervasive
⍤⤙≍ ¯5 ∵¯ 5
⍤⤙≍ 3 ∵+ 1 2
⍤⤙≍ 6 ∵(++) 1 2 3

# Each
⍤⤙≍ [1_2 1_3 1_4] ∵⊟ 1 [2 3 4]
⍤⤙≍ [1_2 1_3 1_4] ⬚0∵⊟ 1 [2 3 4]
⍤⤙≍ [1_2 0_3 0_4] ⬚0∵⊟ [1] [2 3 4]
⍤⤙≍ [[0_1 0_2] [0_3 0_4]] ∵⊟ 0 [1_2 3_4]
⍤⤙≍ [[0_1 0_2] [0_3 0_4]] ∵⊟ [0] [1_2 3_4]
⍤⤙≍ [[0_1 0_2] [5_3 5_4]] ⬚5∵⊟ [0] [1_2 3_4]
⍤⤙≍ [[1_3 1_4] [2_5 2_6]] ∵⊟ 1_2 [3_4 5_6]
⍤⤙≍ [[1_7 2_8] [3_9 4_10] [0_11 0_12]] ⬚0∵⊟ [1_2 3_4] [7_8 9_10 11_12]
⍤⤙≍ [[1_7 2_8] [3_9 4_10] [0_11 π_12]] ⬚0_π∵⊟ [1_2 3_4] [7_8 9_10 11_12]
⍤⤙≍ [1_2_5 1_3_5 1_4_5] ∵(⊂⊂) 1 [2 3 4] 5
⍤⤙≍ [1_2_5 1_3_5 1_4_5] ⬚0∵(⊂⊂) 1 [2 3 4] 5
⍤⤙≍ [1_2_5 0_3_5 0_4_5] ⬚0∵(⊂⊂) [1] [2 3 4] 5
⍤⤙≍ ∵+ 1 [2 3 4] + 1 [2 3 4]
⍤⤙≍ ∵(++) 1 [2 3 4] 5 ++ 1 [2 3 4] 5
⍤⤙≍ ∵(++) [1] [2 3 4] 5 ++ [1] [2 3 4] 5
⍤⤙≍ ⬚0∵(++) [1] [2 3 4] 5 ⬚0(++) [1] [2 3 4] 5
⍤⤙≍ ⬚0∵(++) [1] [2 3 4] [5 6] ⬚0(++) [1] [2 3 4] [5 6]
⍤⤙≍ [[1_2_8 1_3_8 1_4_8] [1_5_9 1_6_9 1_7_9]] ∵[⊙⊙∘] 1 [2_3_4 5_6_7] 8_9
⍤⤙≍ [[1_3 1_4] [2_3 2_4]] ∵⊂ [1 2] [[3 4]]

# Rows pervasive on scalars
⍤⤙≍ ¯5 ≡¯ 5
⍤⤙≍ 3 ≡+ 1 2
⍤⤙≍ 6 ≡(++) 1 2 3

# Rows
⍤⤙≍ [1_2 1_3 1_4] ≡⊟ 1 [2 3 4]
⍤⤙≍ [1_2 1_3 1_4] ⬚0≡⊟ 1 [2 3 4]
⍤⤙≍ [1_2 1_3 1_4] ⬚0≡⊟ [1] [2 3 4]
⍤⤙≍ [1_2_5 1_3_5 1_4_5] ≡(⊂⊂) 1 [2 3 4] 5
⍤⤙≍ [1_2_5 1_3_5 1_4_5] ⬚0≡(⊂⊂) 1 [2 3 4] 5
⍤⤙≍ [1_2_5 1_3_5 1_4_5] ⬚0≡(⊂⊂) [1] [2 3 4] 5
⍤⤙≍ ≡+ 1 [2 3 4] + 1 [2 3 4]
⍤⤙≍ ≡(++) 1 [2 3 4] 5 ++ 1 [2 3 4] 5
⍤⤙≍ ≡(++) [1] [2 3 4] 5 ++ [1] [2 3 4] 5
⍤⤙≍ [8 8 9] ⬚0(++) [1] [2 3 4] 5
⍤⤙≍ [8 9 10] ⬚0≡(++) [1] [2 3 4] 5
⍤⤙≍ [8 9 4] ⬚0(++) [1] [2 3 4] [5 6]
⍤⤙≍ [1_2 6_8 15_18] ≡× [[1][2][3]] [1_2 3_4 5_6]

⍤⤙≍ [6_22_38 54_70_86] ⍜♭₂≡/+ ↯2_3_4⇡24
⍤⤙≍ [7_1_2 7_3_4 7_5_6] ≡⊂7[1_2 3_4 5_6]
⍤⤙≍ [7_1_2 7_3_4 7_5_6] ⍜⊙♭₂≡⊂ 7 [1_2 3_4 5_6]
⍤⤙≍ [[9_1_2 9_3_4] [9_5_6 9_7_8]] ⍜⊙♭₂≡⊂ 9 [[1_2 3_4] [5_6 7_8]]
⍤⤙≍ [2_3_1 5_6_4 8_9_7] ≡↻ 1 [1_2_3 4_5_6 7_8_9]
⍤⤙≍ [2_3_1 5_6_4 8_9_7] ≡(↻:): 1 [1_2_3 4_5_6 7_8_9]
⍤⤙≍ [1_2 4_5 7_8] ≡(↘⊙↻): 2 1 [1_2_3 4_5_6 7_8_9]
≡(⊂⊂⊂) 1 2 3 [1_2_3 4_5_6 7_8_9]
⍤⤙≍ [1_2_3_1_2_3 1_2_3_4_5_6 1_2_3_7_8_9]
⍤⤙≍ [0_1_2 4_5_3 8_6_7] ≡↻ ⇡3 ↯3_3⇡9

⍤⤙≍ [1_2 1_3 1_4] ≡⊂ 1 2_3_4
⍤⤙≍ [1_4 2_4 3_4] ≡⊂ 1_2_3 4
⍤⤙≍ [1 2 3] ≡(⊂⊂) 1 2 3
⍤⤙≍ [[1 2 3]] ≡(⊂⊂) [1] [2] [3]
⍤⤙≍ [[1 2 3]] ≡(⊂⊂) [1] 2 3
⍤⤙≍ [1_4_7 2_5_8 3_6_9] ≡(⊂⊂) 1_2_3 4_5_6 7_8_9
⍤⤙≍ [1_2_3_4_7 1_2_3_5_8 1_2_3_6_9] ≡(⊂⊂) ¤ 1_2_3 4_5_6 7_8_9
⍤⤙≍ [1_4_5_6_7 2_4_5_6_8 3_4_5_6_9] ≡(⊂⊂) ⊙¤ 1_2_3 4_5_6 7_8_9
⍤⤙≍ [1_4_7_8_9 2_5_7_8_9 3_6_7_8_9] ≡(⊂⊂) ⊙⊙¤ 1_2_3 4_5_6 7_8_9
⍤⤙≍ ↯0_3[] ≡(⊂⊂) [] [] 5
⍤⤙≍ ↯0_3[] ≡(⊂⊂) [] 5 []
⍤⤙≍ ↯0_3[] ≡(⊂⊂) 5 [] []

# Partition
⍤⤙≍ ⇡6 /⊂⊜∘ [1 1 2 2 3 3] ⇡6
⍤⤙≍ {1_2_4 5_6 8_9} ⊜□ [1_1_0 1_2_2 0_1_1] +1↯3_3⇡9
⍤⤙≍ ↯2_2_4⟜(⊜∘ [1 1 2 2]) ↯4_4⇡16
⍤⤙≍ [1] ⊜∘.1
⍤⤙≍ [] ⊜∘.0
⍤⤙≍ [] ⊜∘ [] []
⍤⤙≍ "" ⊜∘ [] ""
⍤⤙≍ {} ⊜∘ [] {}
⍤⤙≍ {} ⊜□ [] []
⍤⤙≍ {} ⊜□ [] ""
⍤⤙≍ {} ⊜□ [] {}

# Group
⍤⤙≍ ⇡6 /⊂⊕∘ [0 0 1 1 2 2] ⇡6
⍤⤙≍ {3_7 1_2_4_8_9 5_6} ⊕□ [1_1_0 1_2_2 0_1_1] +1↯3_3⇡9
⍤⤙≍ {↯0_4e ⟜(+8) ↯2_4⇡8} ⊕□ [1 1 2 2] ↯4_4⇡16
⍤⤙≍ [1 1 0 3] ⊕(/+-°⊟⍉) 0_3_1_3_3 °△5_2
⍤⤙≍ {[] [1]} ⊕□.1
⍤⤙≍ [0] ⊕∘.0
⍤⤙≍ [{[3] "c"} {[1 4] "ad"} {[2 5] "be"}] ⊕{⊙∘} ⊸◿3 [1 2 3 4 5] "abcde"
⍤⤙≍ {"a" "aa" "aa"} +1 ⊕(□-) ⊸◿3 [1 2 3 4 5] "abcde"

# Repeat
⍤⤙≍ [2] △ ≡{⍥⍜now∘} 1 1
⍤⤙≍ [10 20 40 80] ⍥(×2) [1 2 3 4] [5 5 5 5]
⍤⤙≍ [10_20 40_80] ⍥(×2) [1_2 3_4] [5_5 5_5]
⍤⤙≍ [10_10 20_20] ⍥(×2) [1 2] [5_5 5_5]
⍤⤙≍ [1] [⍥(×2.)] 0 1
⍤⤙≍ [+1.+1. 6_7_8] ⍥(+1) [+1.+1. 1_2_3] 5
⍤⤙≍ [+1.+1. 2_4_6] ⍥(+1) [+1.+1. 1_2_3] ¤[1 2 3]
⍤⤙≍ [..4_5_6] ⍥(+1) [+1.+1. 1_2_3] [1 2 3]
⍤⤙≍ [[0_1 0_3] [0_1 2_1]] [⍥:] . °△1_2 °△2_2
⍤⤙≍ 5 ⍥(+1) ¯5 10
⍤⤙≍ ↯0_3e ⍥∘[] ¤[1 2 3]
⍤⤙≍ ↯0_0e ⍥∘[] ¤[]
⍤⤙≍ 32 °(⍥(×2) 5) 1024
⍤⤙≍ 32 ◌°⟜⍥(×2) 5 1024

# Do
⍤⤙≍ 1024 ⍢(×2|<1000) 1
⍤⤙≍ 1024 ⍢(×2|<1000.) 1
⍤⤙≍ [1 2 4 8 16 32 64] ◌⍢(⊃(×2|⊂:)|<100) 1 []
⍤⤙≍ [1 2 4 8 16 5] ◌⍢⊂(¬∈:,,⨬(+1×3|÷2)=0◿2.⊢.) [5]

# Partition noadic
F ← ⊜?≠@l.
F "Hello"
F ← ⊜□≠@l.
◌F "Hello"

⍤⤙≍ [1 1 2 1 1 1 3 2 3 4 2] /+≡(×\+.=)⊃◴¤ [3 8 3 1 5 4 3 1 1 3 5]
⍤⤙≍ [1 1 2 1 1 1 3 2 3 4 2] ≡/↥×\+.⊞=⟜◴ [3 8 3 1 5 4 3 1 1 3 5]

# Loop correctness
F ← [+⍥..⊙∘]
⍤⤙≍ [2 2] F 1 2
⍤⤙≍ [4 2 3] F 2 3
F ← [(⍥⊙∘)..]
⍤⤙≍ [1 1] F 1
⍤⤙≍ [0 0] F 0
F ← [(⍥⊙∘).⊙∘]
⍤⤙≍ [2 5] F 2 5
⍤⤙≍ [1 5] F 1 5
⍤⤙≍ [0 5] F 0 5
Fib ← ⇌↘2[⊙∘⍥⊃+⊙∘]⊙∩1
⍤⤙≍ [] Fib 0
⍤⤙≍ [1] Fib 1
⍤⤙≍ [1 1 2 3 5 8 13 21 34 55] Fib 10
Fib ← ⇌↘2[⍥⊃+⊙∘⊙∩1]
⍤⤙≍ [] Fib 0
⍤⤙≍ [1] Fib 1
⍤⤙≍ [1 1 2 3 5 8 13 21 34 55] Fib 10
Fib ← ⇌[◌⍥(⊟⟜+°[⊙⊙∘]⊏[¯1 0 ¯1])⊙0_1]
⍤⤙≍ [] Fib 0
⍤⤙≍ [1] Fib 1
⍤⤙≍ [1 1 2 3 5 8 13 21 34 55] Fib 10

# Table shape correctness
⍤⤙≍ ⊃⊞+⊞(∘+) 1 2
⍤⤙≍ ⊃⊞+⊞(∘+) 1 2_3
⍤⤙≍ ⊃⊞+⊞(∘+) 1_2 3
⍤⤙≍ ⊃⊞+⊞(∘+) 1_2 3_4

# Experimental!

# Monadic tuples
⍤⤙≍ [0 0] △ ⬚0⧅∘ []
⍤⤙≍ [1 1] △ ⬚0⧅∘ [1]
⍤⤙≍ [2 2] △ ⬚0⧅∘ [1 2]
⍤⤙≍ {} ⧅□ []
⍤⤙≍ {[1]} ⧅□ [1]
⍤⤙≍ {[1] [1 2]} ⧅□ [1 2]
